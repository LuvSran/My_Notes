约束类型
```sql
#主键约束,
PRIMARY KEY ; --(+AUTO_INCREMENT自增) 唯一且非空，一个表只能有一个主键,可由单列或多列组成
PRIMARY KEY (student_id, course_id)  -- 多列主键,组合值必须唯一

#非空约束
NOT NULL; -- 字段值不能为 NULL

#唯一约束
UNIQUE; -- 字段值不能重复（允许多个 NULL，因 NULL ≠ NULL）

#默认值约束
DEFAULT 值; -- 当未指定字段值时，自动使用默认值

#检查约束（MySQL 8.0+ 支持）
CHECK (条件); -- 插入或更新时校验字段是否满足条件（如 age >= 0）

#外键约束
FOREIGN KEY (外键列) REFERENCES 主表(主键列); -- 保证引用完整性，从表外键值必须在主表中存在
```
Demo
```sql
CREATE TABLE user_profile (
    id INT PRIMARY KEY AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL UNIQUE,
    age INT DEFAULT 18 CHECK (age >= 0 AND age <= 150),
    email VARCHAR(100) NOT NULL,
    status VARCHAR(20) DEFAULT 'active',
    department_id INT,
    FOREIGN KEY (department_id) REFERENCES departments(id)
);

#添加约束
ALTER TABLE user_profile ADD CONSTRAINT chk_status CHECK (status IN ('active', 'inactive', 'suspended'));

#删除约束
ALTER TABLE user_profile DROP CHECK chk_status;
```
外键约束类型
```sql
#拒绝操作（默认）
ON DELETE RESTRICT;  -- 父表有子记录时，禁止删除父记录
ON UPDATE RESTRICT;  -- 父表有子记录时，禁止更新父主键

#级联操作
ON DELETE CASCADE;   -- 删除父记录时，自动删除所有关联子记录
ON UPDATE CASCADE;   -- 更新父主键时，自动更新所有子表中的外键值

#设为空值
ON DELETE SET NULL;  -- 删除父记录时，将子表外键字段设为 NULL（要求该字段允许 NULL）
ON UPDATE SET NULL;  -- 更新父主键时，将子表外键字段设为 NULL

#NO ACTION（等同于 RESTRICT）
ON DELETE NO ACTION;  -- 行为与 RESTRICT 相同
ON UPDATE NO ACTION;
```
Demo
```sql
#1. 创建父表 departments
CREATE TABLE departments (
    id INT PRIMARY KEY,
    name VARCHAR(50) NOT NULL
);

#2. 创建子表 employees，外键引用 departments.id
CREATE TABLE employees (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    dept_id INT,
    FOREIGN KEY (dept_id) REFERENCES departments(id)
        ON DELETE CASCADE     -- 删除部门时，自动删除其员工
        ON UPDATE CASCADE     -- 更新部门ID时，自动更新员工的 dept_id
);

#3. 插入数据
INSERT INTO departments VALUES (1, 'Engineering'), (2, 'HR');
INSERT INTO employees VALUES (1, 'Alice', 1), (2, 'Bob', 1), (3, 'Charlie', 2);

#4. 演示 CASCADE：删除部门1 → 员工1和2也被删除
DELETE FROM departments WHERE id = 1;
-- 结果：employees 表中 id=1,2 的记录被自动删除

#5. 演示 SET NULL（需先修改外键）
ALTER TABLE employees DROP FOREIGN KEY employees_ibfk_1; --默认外键名
ALTER TABLE employees MODIFY dept_id INT NULL; -- 允许 NULL
ALTER TABLE employees ADD CONSTRAINT fk_dept 
    FOREIGN KEY (dept_id) REFERENCES departments(id)
        ON DELETE SET NULL;  -- 删除部门时，员工 dept_id 设为 NULL

#6. 插入新数据并测试 SET NULL
INSERT INTO departments VALUES (3, 'Marketing');
INSERT INTO employees VALUES (4, 'David', 3);
DELETE FROM departments WHERE id = 3;
-- 结果：员工 David 的 dept_id 变为 NULL
```